<!-- SECTION -->
<div class="section">
	<!-- container -->
	<div class="container">
		<!-- row -->
		<div class="row">
			<!-- Product main img -->
			<div class="col-md-4 col-md-push-1">
				<div id="product-main-img">
					<div class="product-preview">
						<img [src]="book.image" alt="">
					</div>


				</div>
			</div>
			<!-- /Product main img -->


			<!-- /Product thumb imgs -->

			<!-- Product details -->
			<div class="col-md-5" style="margin-left: 20%;">
				<div class="product-details">
					<h2 class="product-name">{{book.name!}}  </h2> <i> ({{book.quantity}} copie(s) remaining)</i>
					<div>
						<div class="product-rating">
							<div class="rating-stars">
								<i class="fa fa-star" style="color: rgb(176, 16, 16);"
								*ngFor="let x of getRatingArray(avgRating)"></i>
								
							</div>
						</div>
						<a class="review-link" >{{reviews.length}} Review(s) </a>
					</div>
					<div style="margin: 10px;">

					</div>
                    

					<ul class="product-btns">
						<li (click)="addToFavorite(bookId)" style="cursor: pointer;"><a ><i class="fa fa-heart" ></i> add to wishlist</a></li>
						<li (click)="addLoan(bookId)" style="cursor: pointer;"><a><i class="fa fa-book"></i> Loan</a></li>
					</ul>

					<ul class="product-links">
						<li>Category:</li>
						<li>{{book.type}}</li>
					</ul>
					<ul class="product-links">
						<li>Release date:</li>
						<li>{{book.releaseDate | date}}</li>

					</ul>

					<ul class="product-links">
						<li>Author:</li>
						<li>{{book.author}}</li>

					</ul>
					<div style="margin: 20px;"></div>
					<p><b>Description</b></p>
					<p>{{book.description}}</p>
				</div>
			</div>
			<!-- /Product details -->

			<!-- Product tab -->
			<div class="col-md-12">
				<div id="product-tab">
					<!-- product tab nav -->
					<ul class="tab-nav">
						<li class="active"><a data-toggle="tab" href="#tab1">Description</a></li>
						<li><a data-toggle="tab" href="#tab3">Reviews ({{reviews.length}})</a></li>
					</ul>
					<!-- /product tab nav -->

					<!-- product tab content -->
					<div class="tab-content">
						<!-- tab1  -->
						<div id="tab1" class="tab-pane fade in active">
							<div class="row">
								<div class="col-md-12">
									<p style="line-height: 2;">{{book.description}}</p>
								</div>
							</div>
						</div>
						<!-- /tab1  -->
						<!-- tab3  -->
						<div id="tab3" class="tab-pane fade in">
							<div class="row">
								<!-- Rating -->
								<div class="col-md-3">
									<div id="rating">
										<div class="rating-avg">
											<span>{{avgRating |  number:'1.1-1'}}</span>
											<div class="rating-stars">
												<i class="fa fa-star"
												*ngFor="let x of getRatingArray(avgRating)"></i>
												
											</div>
										</div>
										
									</div>
								</div>
								<!-- /Rating -->

								<!-- Reviews -->
								<div class="col-md-5">
									<div id="reviews">
										<ul class="reviews">
											<li *ngFor="let rev of reviews">
												<div class="review-heading">
													<h5 class="name">{{rev.user.firstname}} </h5>
													<h5 class="name">{{rev.user.lastname}}</h5>

													<p class="date">{{rev.date | date}}</p>
													<div class="review-rating">

														<i class="fa fa-star"
															*ngFor="let i of getRatingArray(rev.rating)"></i>


													</div>
												</div>


												<div class="review-body">
													<p>comment : {{rev.comment}}</p>
													<p>rating : {{rev.rating}}</p>

												</div>
											</li>

										</ul>

									</div>
								</div>
								<!-- /Reviews -->

								<!-- Review Form -->
								<div class="col-md-4" id="rviwForm">
									<div id="review-form" *ngIf="reviewForm">
										<form class="review-form" [formGroup]="reviewForm"
											(ngSubmit)="addReview(book._id)">
											
											<textarea class="input" formControlName="comment"
												placeholder="Your Review"></textarea>
											<div class="input-rating">
														<span>Your Rating: </span>
														<div class="stars">
															<input id="star5" formControlName="rating" value="5" type="radio"><label for="star5"></label>
															<input id="star4" formControlName="rating" value="4" type="radio"><label for="star4"></label>
															<input id="star3" formControlName="rating" value="3" type="radio"><label for="star3"></label>
															<input id="star2" formControlName="rating" value="2" type="radio"><label for="star2"></label>
															<input id="star1" formControlName="rating" value="1" type="radio"><label for="star1"></label>
														</div>
													</div> 
											<button class="primary-btn">Submit</button>
										</form>
									</div>
								</div>
								<!-- /Review Form -->
							</div>
						</div>
						<!-- /tab3  -->
					</div>
					<!-- /product tab content  -->
				</div>
			</div>
			<!-- /product tab -->
		</div>
		<!-- /row -->
	</div>
	<!-- /container -->
</div>
<!-- /SECTION -->
